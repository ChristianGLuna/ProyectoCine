@page "{id?}"
@model ModificarPeliculaAdminModel
@{
    ViewData["Title"] = Model.EsNueva ? "Añadir Película" : "Modificar Película";
    Layout = null;
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="/css/ModificarPeliculaAdmin.css" />
</head>
<body>

<a asp-page="CarteleraAdmin" class="back-button">← Regresar</a>

<div class="container">
    <div class="image-section">
        <img id="preview" src="@Model.Pelicula.Imagen" alt="Vista previa" />
    </div>

    <form method="post" enctype="multipart/form-data" class="form-card">
        <h3 style="text-align: center;">Película</h3>
        <p style="text-align: center; font-size: 0.8rem;">Agregar/modificar película</p>

        <label>Título</label>
        <input asp-for="Pelicula.Titulo" />

        <label>Género</label>
        <input asp-for="Pelicula.Genero" />

        <label>Duración</label>
        <input asp-for="Pelicula.Duracion" type="number" />

        <label>Clasificación</label>
        <select asp-for="Pelicula.Clasificacion">
            <option value="">Seleccione</option>
            <option>G</option>
            <option>PG</option>
            <option>PG-13</option>
            <option>R</option>
            <option>B</option>
            <option>C</option>
        </select>

        <label>Sinopsis</label>
        <textarea asp-for="Pelicula.Sinopsis"></textarea>

        <!-- Subida de imagen real -->
        <label>Imagen:</label>
        <input type="file" name="ArchivoImagen" accept="image/*" onchange="previewImage(this)" />

        <!-- Valores ocultos -->
        <input type="hidden" asp-for="Pelicula.Activa" />
        <input type="hidden" asp-for="Pelicula.Imagen" />

        <button type="submit" class="btn-primary">Guardar</button>
    </form>
</div>

<script>
    function previewImage(input) {
        const file = input.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = e => document.getElementById('preview').src = e.target.result;
        reader.readAsDataURL(file);
    }
</script>

</body>
</html>
