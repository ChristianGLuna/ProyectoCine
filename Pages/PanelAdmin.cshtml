@page
@model Proyecto_Cine.Pages.PanelAdminModel
@using Microsoft.AspNetCore.Authorization
@{
    Layout = "_Layout";
    ViewData["Title"] = "Panel de Administración";
}

<div class="admin-layout">
    <!-- Sidebar -->
    <div class="admin-sidebar">
        <img src="~/images/logo.svg" alt="Logo" class="logo-img" />
        <h5 class="text-white text-center mt-3">Administrador</h5>
        <ul class="nav flex-column mt-4">
            <li class="nav-item">
                <a asp-page="/Peliculas/Index"
                class="btn btn-primary mb-2 @(ViewContext.HttpContext.Request.Path.Value.Contains("Peliculas") ? "active" : "")">
                Películas
                </a>
            </li>
            <li class="nav-item">
                <a asp-page="/Funciones/Index"
                class="btn btn-primary mb-2 @(ViewContext.HttpContext.Request.Path.Value.Contains("Funciones") ? "active" : "")">
                Funciones
                </a>
            </li>
            <li class="nav-item">
                <a asp-page="/Salas/Index"
                class="btn btn-primary @(ViewContext.HttpContext.Request.Path.Value.Contains("Salas") ? "active" : "")">
                Salas
                </a>
            </li>
        </ul>
    </div>

    <!-- Main content -->
    <div class="admin-main">
        <div class="d-flex justify-content-between align-items-center">
            <h2 class="text-white">Panel de Administración - SarmiMovie</h2>
            <a asp-page="/Logout" class="btn btn-danger">Cerrar sesión</a>
        </div>

        <div class="mt-4">
            <h4 class="text-white">¡Bienvenido, @User.Identity.Name!</h4>

            <div class="info-box mt-4">
                <h5>Resumen de Actividad</h5>
                <ul>
                    <li>Películas en cartelera: @Model.PeliculasActivas</li>
                    <li>Salas disponibles: @Model.SalasDisponibles</li>
                    <li>Próximos estrenos: @Model.EstrenosProximos</li>
                    <li>Boletos vendidos esta semana: @Model.BoletosVendidosSemana</li>
                </ul>

                <h6>Notificaciones</h6>
                @if (Model.Notificaciones.Any())
                {
                    <ul>
                        @foreach (var nota in Model.Notificaciones)
                        {
                            <li>@nota</li>
                        }
                    </ul>
                }
                else
                {
                    <p>No hay notificaciones pendientes.</p>
                }
            </div>
        </div>
    </div>
</div>

@section Styles {
    <style>
        .admin-layout {
            display: flex;
            min-height: 100vh;
            background-color: #1c1c1c;
        }

        .admin-sidebar {
            width: 220px;
            background-color: #000;
            padding: 20px;
            text-align: center;
        }

        .admin-main {
            flex-grow: 1;
            padding: 40px;
        }

        .info-box {
            background-color: #e0e0e0;
            color: #000;
            padding: 20px;
            border-radius: 10px;
        }

        .logo-img {
            width: 100px;
            margin-bottom: 10px;
        }

        .active {
            background-color: #0056b3 !important;
            border: 2px solid #fff;
        }   
    </style>
}

